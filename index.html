<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Academic Record</title>
    <script src="index.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap');
        
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .title-container {
            text-align: center;
            margin: 20px 0 40px 0;
            padding: 20px;
            background: linear-gradient(45deg, #2193b0, #6dd5ed);
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            animation: slideIn 1s ease-out, glow 2s ease-in-out infinite;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes glow {
            0% {
                box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            }
            50% {
                box-shadow: 0 15px 30px rgba(33,147,176,0.3);
            }
            100% {
                box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            }
        }

        .main-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5em;
            color: white;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #000;
            padding: 0;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
            padding: 8px;
        }
        input, select, textarea {
            width: 100%;
            border: none;
            padding: 8px;
            margin: 0;
            outline: none;
            font-family: inherit;
            background: transparent;
        }
        input[type="checkbox"] {
            width: auto;
            margin: 0 4px;
        }
        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        .input-error {
            border: 1px solid red !important;
        }
    </style>
</head>
<body>
<div class="title-container">
    <h1 class="main-title">Students Counseling Page</h1>
</div>
<fieldset style="border-color: #000; padding-top: 2vh;">
    <table>
        <tr>
            <th>Year - Sem </th>
            <td><input type="text" name="year_sem"></td>
            <th>Academic Year</th>
            <td><input type="text" name="academic_year"></td>
            <td>RTF <input type="checkbox"></td>
            <td>MQ <input type="checkbox"></td>
            <td>Any Other <input type="checkbox"></td>
        </tr>
        <tr>
            <th colspan="2">Name of counselor</th>
            <td colspan="5"><input type="text" name="counselor_name"></td>
        </tr>
        <tr>
            <th colspan="2">Studdent's Name</th>
            <td colspan="5">
                <input type="text" name="student_name" id="student_name">
                <div class="error-message" id="name-error">Please enter your name</div>
            </td>
        </tr>
        <tr>
            <th colspan="2">Student's Phone</th>
            <td colspan="2"><input type="tel" name="student_phone"></td>
            <th>Father's Phone</th>
            <td colspan="2"><input type="tel" name="father_phone"></td>
        </tr>
    </table>
  <table>
    <tr>
        <th colspan="2">Studdent's Residence</th>
        <td colspan="4">Hostel<input type="checkbox">/Days Scholor<input type="checkbox">/College Bus<input type="checkbox">/Rtc Bus <input type="checkbox"></td>
    </tr>
    <tr>
        <th colspan="2">NBKRIST Hostel Name</th>
        <td colspan="2"><input type="text" name="hostel_name"></td>
        <th>Room No</th>
        <td><input type="text" name="room_no"></td>
    </tr>
    <tr>
        <th rowspan="3">Hostel Roommates</th>
        <td>1</td>
        <td colspan="2"><input type="text" name="roommate1"></td>
        <th>Room No</th>
        <td><input type="text" name="room_no1"></td>
    </tr>
    <tr>
        <td>2</td>
        <td colspan="2"><input type="text" name="roommate2"></td>
        <th>Room No</th>
        <td><input type="text" name="room_no2"></td>
    </tr>
    <tr>
        <td>3</td>
        <td colspan="2"><input type="text" name="roommate3"></td>
        <th>Room No</th>
        <td><input type="text" name="room_no3"></td>
    </tr>
  </table>
  <table>
    <tr>
        <th>College Bus Route</th>
        <td><input type="text" name="bus_route"></td>
        <th colspan="2">BUS NO</th>
        <td><input type="text" name="bus_no"></td>
    </tr>
    <tr>
        <th>RTC BUS/Two Wheeler Travel Place</th>
        <td colspan="4"><input type="text" name="rtc_travel_place"></td>
    </tr>
    <tr>
        <th>Two Wheeler Make & Number</th>
        <td colspan="4"><input type="text" name="vehicle_details"></td>
    </tr>
    <tr>
        <th>Days Scholar Address</th>
        <td colspan="4"><input type="text" name="day_scholar_address"></td>
    </tr>
    <tr>
        <th rowspan="4">Days Scholar Roommates
            with Roll Numbers
        </th>
        <th colspan="2">Name</th>
        <th colspan="2">Roll No</th>
    </tr>
    <tr>
        <td colspan="2"><input type="text" name="ds_name1"></td>
        <td colspan="2"><input type="text" name="ds_roll1"></td>
    </tr>
    <tr>
        <td colspan="2"><input type="text" name="ds_name2"></td>
        <td colspan="2"><input type="text" name="ds_roll2"></td>
    </tr>
    <tr>
        <td colspan="2"><input type="text" name="ds_name3"></td>
        <td colspan="2"><input type="text" name="ds_roll3"></td>
    </tr>
  </table>
    <table>
        <tr>
            <th>Month</th>
            <th><input type="month" name="month1"></th>
            <th>Follow-up</th>
            <th><input type="month" name="month2"></th>
            <th>Follow-up</th>
            <th><input type="month" name="month3"></th>
            <th>Follow-up</th>
            <th><input type="month" name="month4"></th>
            <th>Follow-up</th>
            <th><input type="month" name="month5"></th>
            <th>Follow-up</th>
        </tr>
        <tr>
            <td>Classes Conducted</td>
            <td><input type="number" name="classes_conducted1" min="0"></td>
            <td rowspan="4"><textarea name="followup1" rows="4"></textarea></td>
            <td><input type="number" name="classes_conducted2" min="0"></td>
            <td rowspan="4"><textarea name="followup2" rows="4"></textarea></td>
            <td><input type="number" name="classes_conducted3" min="0"></td>
            <td rowspan="4"><textarea name="followup3" rows="4"></textarea></td>
            <td><input type="number" name="classes_conducted4" min="0"></td>
            <td rowspan="4"><textarea name="followup4" rows="4"></textarea></td>
            <td><input type="number" name="classes_conducted5" min="0"></td>
            <td rowspan="4"><textarea name="followup5" rows="4"></textarea></td>
        </tr>
        <tr>
            <td>Classes Attended</td>
            <td><input type="number" name="classes_attended1" min="0"></td>
            <td><input type="number" name="classes_attended2" min="0"></td>
            <td><input type="number" name="classes_attended3" min="0"></td>
            <td><input type="number" name="classes_attended4" min="0"></td>
            <td><input type="number" name="classes_attended5" min="0"></td>
        </tr>
        <tr>
            <td>% Attendance</td>
            <td><input type="number" name="attendance_percent1" min="0" max="100" step="0.01"></td>
            <td><input type="number" name="attendance_percent2" min="0" max="100" step="0.01"></td>
            <td><input type="number" name="attendance_percent3" min="0" max="100" step="0.01"></td>
            <td><input type="number" name="attendance_percent4" min="0" max="100" step="0.01"></td>
            <td><input type="number" name="attendance_percent5" min="0" max="100" step="0.01"></td>
        </tr>
        <tr>
            <td>Monthly Letter(Yes/No)</td>
            <td><select name="monthly_letter1"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select></td>
            <td><select name="monthly_letter2"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select></td>
            <td><select name="monthly_letter3"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select></td>
            <td><select name="monthly_letter4"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select></td>
            <td><select name="monthly_letter5"><option value="">Select</option><option value="Yes">Yes</option><option value="No">No</option></select></td>
        </tr>
        
    </table>
    <table>
        <tr>
            <th colspan="8">ACADEMIC RECORD</th>
        </tr>
        <tr>
            <th>Subject</th>
            <th>I Mid</th>
            <th>II Mid</th>
            <th>Sessional Marks</th>
            <th>End Sem. Marks</th>
            <th>Total Marks</th>
            <th>Result (P/F)</th>
            <th>Year of Pass</th>
        </tr>
        <tr>
            <td><input type="text" name="subject1"></td>
            <td><input type="number" name="mid1_1" min="0"></td>
            <td><input type="number" name="mid2_1" min="0"></td>
            <td><input type="number" name="sessional1" min="0"></td>
            <td><input type="number" name="endsem1" min="0"></td>
            <td><input type="number" name="total1" min="0"></td>
            <td><select name="result1"><option value="">Select</option><option value="P">P</option><option value="F">F</option></select></td>
            <td><input type="number" name="pass_year1" min="2000" max="2099"></td>
        </tr>
        <tr>
            <td><input type="text" name="subject2"></td>
            <td><input type="number" name="mid1_2" min="0"></td>
            <td><input type="number" name="mid2_2" min="0"></td>
            <td><input type="number" name="sessional2" min="0"></td>
            <td><input type="number" name="endsem2" min="0"></td>
            <td><input type="number" name="total2" min="0"></td>
            <td><select name="result2"><option value="">Select</option><option value="P">P</option><option value="F">F</option></select></td>
            <td><input type="number" name="pass_year2" min="2000" max="2099"></td>
        </tr>
        <tr>
            <td><input type="text" name="subject3"></td>
            <td><input type="number" name="mid1_3" min="0"></td>
            <td><input type="number" name="mid2_3" min="0"></td>
            <td><input type="number" name="sessional3" min="0"></td>
            <td><input type="number" name="endsem3" min="0"></td>
            <td><input type="number" name="total3" min="0"></td>
            <td><select name="result3"><option value="">Select</option><option value="P">P</option><option value="F">F</option></select></td>
            <td><input type="number" name="pass_year3" min="2000" max="2099"></td>
        </tr>
        <tr>
            <td><input type="text" name="subject4"></td>
            <td><input type="number" name="mid1_4" min="0"></td>
            <td><input type="number" name="mid2_4" min="0"></td>
            <td><input type="number" name="sessional4" min="0"></td>
            <td><input type="number" name="endsem4" min="0"></td>
            <td><input type="number" name="total4" min="0"></td>
            <td><select name="result4"><option value="">Select</option><option value="P">P</option><option value="F">F</option></select></td>
            <td><input type="number" name="pass_year4" min="2000" max="2099"></td>
        </tr>
        <tr>
            <td><input type="text" name="subject5"></td>
            <td><input type="number" name="mid1_5" min="0"></td>
            <td><input type="number" name="mid2_5" min="0"></td>
            <td><input type="number" name="sessional5" min="0"></td>
            <td><input type="number" name="endsem5" min="0"></td>
            <td><input type="number" name="total5" min="0"></td>
            <td><select name="result5"><option value="">Select</option><option value="P">P</option><option value="F">F</option></select></td>
            <td><input type="number" name="pass_year5" min="2000" max="2099"></td>
        </tr>
    </table>
    <table>
        <tr>
            <th>Date</th>
            <th>Description of Counseling 'with signatures of Student,counselor and HOD</th>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="text"></td>
        </tr>
        <tr>
            <th>Date</th>
            <th>Prizes, Participations, Disciplinary Matters, etc.</th>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="text"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="text"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="text"></td>
        </tr>
    </table>
    <div style="text-align: center; margin-top: 20px;">
        <button type="button" onclick="submitForm()" style="padding: 10px 20px; margin: 0 10px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Submit</button>
        <button type="button" onclick="clearForm()" style="padding: 10px 20px; margin: 0 10px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;">Clear</button>
        <button type="button" onclick="saveForm()" style="padding: 10px 20px; margin: 0 10px; background-color: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">Save</button>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function() {
            // Initialize EmailJS with your public key
            emailjs.init("yt3uhvbk3jgCdDpsv");
        })();

        let formattedEmailBody = '';

        function clearForm() {
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    input.checked = false;
                } else {
                    input.value = '';
                    input.classList.remove('input-error');
                }
            });
            document.getElementById('name-error').style.display = 'none';
        }

        function saveForm() {
            // Get all form data
            const formData = {};
            
            // Get all input fields
            document.querySelectorAll('input, select, textarea').forEach(input => {
                if (input.name) {
                    if (input.type === 'checkbox') {
                        formData[input.name] = input.checked;
                    } else {
                        formData[input.name] = input.value;
                    }
                }
            });
            
            // Save to localStorage
            localStorage.setItem('counselingFormData', JSON.stringify(formData));
            alert('Form data saved successfully!');
        }

        // Load saved data when page loads
        window.onload = function() {
            const savedData = localStorage.getItem('counselingFormData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                Object.keys(formData).forEach(key => {
                    const input = document.querySelector(`[name="${key}"]`);
                    if (input) {
                        if (input.type === 'checkbox') {
                            input.checked = formData[key];
                        } else {
                            input.value = formData[key];
                        }
                    }
                });
            }
        }

        function submitForm() {
            const nameInput = document.getElementById('student_name');
            const nameError = document.getElementById('name-error');
            
            if (!nameInput.value.trim()) {
                nameInput.classList.add('input-error');
                nameError.style.display = 'block';
                return;
            }

            // Format email content in a simple, readable way
            let emailBody = `
STUDENT COUNSELING FORM DETAILS
==============================
 
BASIC INFORMATION
----------------
Student Name: ${document.querySelector('[name="student_name"]').value}
Year-Sem: ${document.querySelector('[name="year_sem"]').value}
Academic Year: ${document.querySelector('[name="academic_year"]').value}
Counselor Name: ${document.querySelector('[name="counselor_name"]').value}
Student Phone: ${document.querySelector('[name="student_phone"]').value}
Father's Phone: ${document.querySelector('[name="father_phone"]').value}

RESIDENCE DETAILS
---------------
Hostel Name: ${document.querySelector('[name="hostel_name"]').value}
Room Number: ${document.querySelector('[name="room_no"]').value}

HOSTEL ROOMMATES
--------------
1. ${document.querySelector('[name="roommate1"]').value} (Room: ${document.querySelector('[name="room_no1"]').value})
2. ${document.querySelector('[name="roommate2"]').value} (Room: ${document.querySelector('[name="room_no2"]').value})
3. ${document.querySelector('[name="roommate3"]').value} (Room: ${document.querySelector('[name="room_no3"]').value})

TRANSPORTATION
------------
Bus Route: ${document.querySelector('[name="bus_route"]').value}
Bus Number: ${document.querySelector('[name="bus_no"]').value}
RTC/Travel Place: ${document.querySelector('[name="rtc_travel_place"]').value}
Vehicle Details: ${document.querySelector('[name="vehicle_details"]').value}

DAY SCHOLAR DETAILS
----------------
Address: ${document.querySelector('[name="day_scholar_address"]').value}

DAY SCHOLAR ROOMMATES
------------------
1. ${document.querySelector('[name="ds_name1"]').value} (Roll: ${document.querySelector('[name="ds_roll1"]').value})
2. ${document.querySelector('[name="ds_name2"]').value} (Roll: ${document.querySelector('[name="ds_roll2"]').value})
3. ${document.querySelector('[name="ds_name3"]').value} (Roll: ${document.querySelector('[name="ds_roll3"]').value})

ACADEMIC RECORDS
-------------
`;

            // Add academic records
            for(let i = 1; i <= 5; i++) {
                const subject = document.querySelector(`[name="subject${i}"]`).value;
                if(subject) {
                    emailBody += `
Subject ${i}: ${subject}
- Mid 1: ${document.querySelector(`[name="mid1_${i}"]`).value}
- Mid 2: ${document.querySelector(`[name="mid2_${i}"]`).value}
- Sessional: ${document.querySelector(`[name="sessional${i}"]`).value}
- End Sem: ${document.querySelector(`[name="endsem${i}"]`).value}
- Total: ${document.querySelector(`[name="total${i}"]`).value}
- Result: ${document.querySelector(`[name="result${i}"]`).value}`;
                }
            }

            // Send email using EmailJS
            emailjs.send(
                "service_j6jrljk",
                "template_2hmu3je",
                {
                    to_email: "23kb1a3064@nbkrist.org",
                    subject: "Student Counseling Form",
                    message: emailBody
                }
            ).then(
                function(response) {
                    alert("Form submitted successfully!");
                    clearForm();
                },
                function(error) {
                    alert("Failed to submit form. Please try again.");
                }
            );
        }
    </script>
</fieldset>
</body>
</html>
